gx.extensions.module("dynamic_shop_messages",[],function(e){"use strict";var t=$(this),n={url:jse.core.config.get("shopUrl")+"/admin/admin.php?do=DynamicShopMessages",lifetime:3e4},r=$.extend(!0,{},n,e),o={},i=function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerHTML===e},a=function(e){var t=!1;return"object"!=typeof e&&(e=[e]),$.each(e,function(){var e=new RegExp(this);return window.location.href===jse.core.config.get("shopUrl")+"/admin/"+this||e.test(window.location.href)?(t=!0,!1):void 0}),t},c=function(e){$.each(e,function(e,n){try{if("undefined"==typeof n.target_page||"undefined"==typeof n.target_selector)throw new TypeError("No target information provided. Skipping to the next entry...");if(!a(n.target_page))throw new TypeError("The entry is not targeted for the current page. Skipping to the next entry...");var o=Date.now,c=setInterval(function(){var e=t.find(n.target_selector);if(e.length>0){var a=e.html();e.append(n.message),i(e.html())||(e.html(a),jse.core.debug.error("Dynamic message couldn't be applied.",n)),clearInterval(c)}if(Date.now-o>r.lifetime)throw clearInterval(c),Error("Search lifetime limit exceeded, no element matched the provided selector.")},300)}catch(d){return!0}})};return o.init=function(e){$.getJSON(r.url).done(function(e){c(e.MESSAGES)}).fail(function(e,t,n){jse.core.debug.info("Could not load the dynamic shop messages.",e,t,n)}),e()},o});