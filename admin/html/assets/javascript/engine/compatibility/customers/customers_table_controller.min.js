gx.compatibility.module("customers_table_controller",[jse.core.config.get("shopUrl")+"/admin/html/assets/javascript/engine/libs/button_dropdown"],function(t){"use strict";var n=($(this),{}),o=($.extend(!0,{},n,t),{}),e=window.location.origin+window.location.pathname,i=function(){$(".gx-customer-overview tr").not(".dataTableHeadingRow").each(function(){var t=$(this),n=t.data(),o=t.find(".js-button-dropdown");o.length&&(t.find(".btn-edit").closest("tr").css({cursor:"pointer"}).on("click",function(t){var o=[e,"?cID="+n.rowId,"&action=edit"].join("");"TD"===$(t.target).prop("tagName")&&window.open(o,"_self")}),t.find(".btn-edit").css({cursor:"pointer"}).prop("title",jse.core.lang.translate("edit","buttons")).on("click",function(){var t=[e,"?cID="+n.rowId,"&action=edit"].join("");window.open(t,"_self")}),1!==n.rowId&&t.find(".btn-delete").css({cursor:"pointer"}).prop("title",jse.core.lang.translate("delete","buttons")).on("click",function(){var t=[e,"?cID="+n.rowId,"&action=confirm"].join("");window.open(t,"_self")}),1===n.rowId&&t.find(".btn-delete").css({opacity:"0.2"}),t.find(".btn-order").css({cursor:"pointer"}).prop("title",jse.core.lang.translate("BUTTON_ORDERS","admin_buttons")).on("click",function(){var t=[e.replace("customers.php","orders.php"),"?cID="+n.rowId].join("");window.open(t,"_self")}),c(t,o,n))})},c=function(t,n,o){var e=["edit"];1!==o.rowId&&e.push("delete"),e=e.concat(["BUTTON_STATUS","BUTTON_ORDERS","BUTTON_EMAIL","BUTTON_IPLOG","BUTTON_NEW_ORDER"]),0===t.find("[data-cust-group]").data("custGroup")&&1!==t.find("[data-cust-id]").data("custId")&&e.push("BUTTON_ACCOUNTING");var i=".contentTable .infoBoxContent a.context_view_button.btn_right";$(i).length&&(e.push("MAILBEEZ_OVERVIEW"),e.push("MAILBEEZ_NOTIFICATIONS"),e.push("MAILBEEZ_CONVERSATIONS"));for(var c in e)a(n,e[c],o)},a=function(t,n,o){jse.libs.button_dropdown.mapAction(t,n,r[n],function(t){s(n,o)})},r={edit:"buttons","delete":"buttons",BUTTON_STATUS:"admin_buttons",BUTTON_ORDERS:"admin_buttons",BUTTON_EMAIL:"admin_buttons",BUTTON_IPLOG:"admin_buttons",MAILBEEZ_OVERVIEW:"admin_customers",MAILBEEZ_NOTIFICATIONS:"admin_customers",MAILBEEZ_CONVERSATIONS:"admin_customers",BUTTON_NEW_ORDER:"admin_buttons",BUTTON_ACCOUNTING:"admin_buttons"},s=function(t,n){switch(t){case"edit":d(n);break;case"delete":l(n);break;case"BUTTON_STATUS":_(n);break;case"BUTTON_ORDERS":u(n);break;case"BUTTON_EMAIL":I(n);break;case"BUTTON_IPLOG":b(n);break;case"MAILBEEZ_OVERVIEW":T(n);break;case"MAILBEEZ_NOTIFICATIONS":p(n);break;case"MAILBEEZ_CONVERSATIONS":f(n);break;case"BUTTON_NEW_ORDER":w(n);break;case"BUTTON_ACCOUNTING":O(n);break;default:console.alert("Callback not found")}},d=function(t){var n=[e,"?cID="+t.rowId,"&action=edit"].join("");window.open(n,"_self")},l=function(t){var n=[e,"?cID="+t.rowId,"&action=confirm"].join("");window.open(n,"_self")},_=function(t){var n=[e,"?cID="+t.rowId,"&action=editstatus"].join("");window.open(n,"_self")},u=function(t){var n=[e.replace("customers.php","orders.php"),"?cID="+t.rowId].join("");window.open(n,"_self")},I=function(t){var n=[e.replace("customers.php","mail.php"),"?selected_box=tools","&customer="+t.custEmail].join("");window.open(n,"_self")},b=function(t){var n=[e,"?cID="+t.rowId,"&action=iplog"].join("");window.open(n,"_self")},T=function(t){var n=$(".contentTable .infoBoxContent a.context_view_button.btn_left"),o=$(".contentTable .infoBoxContent a.context_view_button.btn_left").attr("onclick");o=o.replace(/cID=(.*)&/,"cID="+t.rowId+"&"),$(".contentTable .infoBoxContent a.context_view_button.btn_left").attr("onclick",o),n.get(0).click()},p=function(t){var n=$(".contentTable .infoBoxContent a.context_view_button.btn_middle"),o=$(".contentTable .infoBoxContent a.context_view_button.btn_middle").attr("onclick");o=o.replace(/cID=(.*)&/,"cID="+t.rowId+"&"),$(".contentTable .infoBoxContent a.context_view_button.btn_middle").attr("onclick",o),n.get(0).click()},f=function(t){var n=$(".contentTable .infoBoxContent a.context_view_button.btn_right"),o=$(".contentTable .infoBoxContent a.context_view_button.btn_right").attr("onclick");o=o.replace(/cID=(.*)&/,"cID="+t.rowId+"&"),$(".contentTable .infoBoxContent a.context_view_button.btn_right").attr("onclick",o),n.get(0).click()},w=function(t){var n=[e,"?cID="+t.rowId,"&action=new_order"].join("");window.open(n,"_self")},O=function(t){var n=[e.replace("customers.php","accounting.php"),"?cID="+t.rowId].join("");window.open(n,"_self")};return o.init=function(t){var n=setInterval(function(){$(".js-button-dropdown").length&&(clearInterval(n),i())},500);t()},o});