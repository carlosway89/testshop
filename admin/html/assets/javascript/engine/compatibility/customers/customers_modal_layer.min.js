gx.compatibility.module("customers_modal_layer",[],function(t){"use strict";var e=$(this),n=($("#modal_layer_container"),{}),a=$.extend(!0,{},n,t),o={},i=function(t){var e,n,o=[];switch(a.action){case"delete":e=t.find("input:first"),n=t.find("a.btn"),$(e).hide(),$(n).hide(),o.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close"),n.trigger("click")}},{text:jse.core.lang.translate("delete","buttons"),"class":"btn btn-primary",click:function(){var t={pageToken:$('input[name="page_token"]:first').attr("value"),cID:window.location.href.match(/cID=\d+/)[0]};t.url=[window.location.origin,window.location.pathname,"?action=deleteconfirm","&"+t.cID].join("");var e=$('<form name="customers" method="post" action='+t.url+"></form>");e.append('<input type="hidden" name="page_token" value='+t.pageToken+">"),e.append('<input type="hidden" name="deleteconfirm" value="DeleteConfirm">'),e.appendTo("body"),e.submit()}});break;case"editstatus":e=t.find("input:eq(1)"),n=t.find("a.btn"),$(e).hide(),$(n).hide(),o.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close"),window.open(n.attr("href"),"_self")}},{text:jse.core.lang.translate("update","buttons"),"class":"btn btn-primary",click:function(){var e={pageToken:$('input[name="page_token"]:first').attr("value"),cID:window.location.href.match(/cID=\d+/)[0],status:t.find("select").val()};e.url=[window.location.origin,window.location.pathname,"?action=statusconfirm","&"+e.cID].join("");var n=$('<form name="customers" method="post" action='+e.url+"></form>");n.append('<input type="hidden" name="page_token" value='+e.pageToken+">"),n.append('<input type="hidden" name="status" value='+e.status+">"),n.append('<input type="hidden" name="statusconfirm" value="Update">'),n.appendTo("body"),n.submit()}});break;case"iplog":o.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close")}});break;case"new_memo":console.log(e),o.push({text:jse.core.lang.translate("close","buttons"),"class":"btn",click:function(){$(this).dialog("close")}}),o.push({text:jse.core.lang.translate("send","buttons"),"class":"btn btn-primary",click:function(e){t.submit()}})}return o},s=function(){e.dialog({title:jse.core.lang.translate("TEXT_INFO_HEADING_DELETE_CUSTOMER","admin_customers"),modal:!0,dialogClass:"gx-container",buttons:i(e),width:420,closeOnEscape:!1,open:function(){$(".ui-dialog-titlebar-close").hide()}})},c=function(){e.dialog({title:jse.core.lang.translate("TEXT_INFO_HEADING_STATUS_CUSTOMER","admin_customers"),modal:!0,dialogClass:"gx-container",buttons:i(e),width:420,closeOnEscape:!1,open:function(){$(".ui-dialog-titlebar-close").hide(),$(this).find('select[name="status"]').css({width:"100%",height:"35px",fontSize:"12px"})}})},l=function(){e=$("<div></div>"),$("[data-iplog]").each(function(){e.append(this),e.append("<br><br>")}),e.appendTo("body"),e.dialog({title:"IP-Log",modal:!0,dialogClass:"gx-container",buttons:i(e),width:420,closeOnEscape:!1})},r=function(t){var e=$("#customer_memo_form");t.preventDefault(),e.dialog({title:jse.core.lang.translate("TEXT_NEW_MEMO","admin_customers"),modal:!0,dialogClass:"gx-container",buttons:i(e),width:580})};return o.init=function(t){switch(a.action){case"delete":s();break;case"editstatus":c();break;case"iplog":l();break;case"new_memo":e.on("click",r)}t()},o});