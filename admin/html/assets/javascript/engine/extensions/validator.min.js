gx.extensions.module("validator",[],function(e){"use strict";var t=$(this),a={required:function(e,t,a,r){switch(a){case"select":return-1===parseInt(t,10)?!1:!0;case"checkbox":return-1===parseInt(t,10)?!1:!0;case"radio":return!1;default:return t?!0:!1}},email:function(e,t,a,r){if(""===t&&-1===r.validate.indexOf("required"))return e.removeClass("error valid"),null;var i=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return i.test(t)},ckeditor:function(e,t,a,r){var i=e.attr("id");if(void 0===i)throw"Cannot validate CKEditor for element without id attribute.";return""!==CKEDITOR.instances[i].getData()?!0:!1}},r={},i=($.extend(!0,{},r,e),{}),n=function(e,t){switch(t){case"valid":e.removeClass("error").addClass("valid");break;case"error":e.removeClass("valid").addClass("error");break;default:e.removeClass("valid error")}},o=function(){var e=$(this),t=i._data(e),r=t.validate?t.validate.split(" "):[],o=e.prop("tagName").toLowerCase(),d=!0;return o="input"!==o?o:e.attr("type").toLowerCase(),$.each(r,function(r,i){var l=a[i](e,e.val(),o,t);null!==l&&(n(e,l?"valid":"error"),d=d?l:!1)}),d},d=function(e,t){e.preventDefault(),e.stopPropagation();var a=$(e.target),r=!0;a.filter(".validate").add(a.find(".validate")).each(function(){var e=o.call($(this));r=r?e:!1}),t&&t.deferred&&(r?t.deferred.resolve():t.deferred.reject())},l=function(){t.filter(".validate").add(t.find(".validate")).each(function(){n($(this),"reset")})};return i.init=function(e){t.on("change",".validate:text:visible",o).on("validator.validate",d).on("validator.reset",l).on("submit",function(e){e.preventDefault()}),e()},i});