gx.controllers.module("offline_layer_editor",["form"],function(t){"use strict";var e=$(this),i={},n=($.extend(!0,{},i,t),e.data().lightboxParams),r={},o=null,a="",l=function(t){o.each(function(){var e=$(this),i=e.attr("name");i=t?i.replace(a,"switcher checked"):i+a,e.attr("name",i)})};return r.init=function(t){var i=$("#lightbox_package_"+n.identifier),r=e.find(".lightbox_content_container form"),c=$(n.element).closest("tr"),s=jse.libs.form.getData(c);o=c.find("[name]"),a="_tmp_"+parseInt(Math.random()*(new Date).getTime()),l(),jse.libs.form.prefillForm(r,s,!1),jse.core.fallback.setupWidgetAttr(e),gx.extensions.init(e),gx.controllers.init(e),gx.widgets.init(e),gx.compatibility.init(e),i.on("click",".ok",function(){r.find("textarea").each(function(){var t=$(this),e=t.attr("name"),i=window.CKEDITOR?window.CKEDITOR.instances[e]:null;i&&t.val(i.getData())}),i.find("form").trigger("layerClose"),l(!0),jse.libs.form.prefillForm(c,jse.libs.form.getData(r),!1),$.lightbox_plugin("close",n.identifier)}),i.on("click",".close",function(){l(!0)}),i.on("widget.initialized",function(t,e){"ckeditor"===e.widget&&$(t.target).trigger("ckeditor.update")}),e.find("form").trigger("language_switcher.updateField",[]),t()},r});