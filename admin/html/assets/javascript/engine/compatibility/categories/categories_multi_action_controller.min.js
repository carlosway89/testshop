gx.compatibility.module("categories_multi_action_controller",[jse.core.config.get("shopUrl")+"/admin/html/assets/javascript/engine/libs/button_dropdown"],function(t){"use strict";var e=$(this),n={},i=e.find(".js-bottom-dropdown"),o=$('tr[data-id] input[type="checkbox"]'),a=($.extend(!0,{},n,t),{}),c=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null==e?null:e[1]||0},r=function(t){var e;try{e=window.location.href.match(/cPath=(.*)/)[1]}catch(n){e=$("[data-cpath]:first").data().cpath}var i=$('input[name="page_token"]:first').attr("value"),o=[m(),"categories.php","?action=multi_action","&cPath="+e].join(""),a=c("search");0!==a&&null!==a&&(o+="&search="+a);var r=$('<form name="multi_action_form" method="post" action='+o+"></form>");return r.append('<input type="hidden" name="cpath" value='+e+">"),r.append('<input type="hidden" name="page_token" value='+i+">"),r.append('<input type="hidden" name='+t+' value="Action">'),r.appendTo("body"),r},u={"delete":"buttons",BUTTON_MOVE:"admin_buttons",BUTTON_COPY:"admin_buttons",BUTTON_STATUS_ON:"admin_buttons",BUTTON_STATUS_OFF:"admin_buttons"},l=function(){var t=["delete","BUTTON_MOVE","BUTTON_COPY","BUTTON_STATUS_ON","BUTTON_STATUS_OFF"];for(var e in t)d(t[e])},d=function(t){var e=u[t],n=h(t);jse.libs.button_dropdown.mapAction(i,t,e,n)},p=function(t){if(o.filter(":checked").length){var e=r("multi_delete");o.filter(":checked").appendTo(e),e.submit()}},s=function(t){if(o.filter(":checked").length){var e=r("multi_move");o.filter(":checked").appendTo(e),e.submit()}},f=function(t){if(o.filter(":checked").length){var e=r("multi_copy");o.filter(":checked").appendTo(e),e.submit()}},T=function(t){if(o.filter(":checked").length){var e=r("multi_status_on");o.filter(":checked").appendTo(e),e.submit()}},_=function(t){if(o.filter(":checked").length){var e=r("multi_status_off");o.filter(":checked").appendTo(e),e.submit()}},h=function(t){switch(t){case"delete":return p;case"BUTTON_MOVE":return s;case"BUTTON_COPY":return f;case"BUTTON_STATUS_ON":return T;case"BUTTON_STATUS_OFF":return _;default:console.alert("_getActionCallback: Action not found")}return null},m=function(){var t=window.location.origin,e=window.location.pathname,n=e.split("/");n.pop();var i=n.join("/");return t+i+"/"};return a.init=function(t){var e=setInterval(function(){$(".js-button-dropdown").length>0&&(clearInterval(e),l())},200);t()},a});