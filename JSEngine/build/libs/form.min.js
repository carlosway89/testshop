jse.libs.form=jse.libs.form||{},function(e){"use strict";e.createOptions=function(e,t,a,n){var r=[],c=function(e,t){return e=e.name.toLowerCase(),t=t.name.toLowerCase(),t>e?-1:1};t=n?t.sort(c):t,a&&r.push($('<option value="-1"> </option>')),$.each(t,function(e,t){var a=$('<option value="'+t.value+'">'+t.name+"</option>");a.data("data",t),r.push(a)}),e.append(r)},e.prefillForm=function(e,t,a){$.each(t,function(t,n){var r=e.find('[name="'+t+'"]'),c=null;if(r.length){switch(c=r.prop("tagName").toLowerCase(),c="input"!==c?c:r.attr("type").toLowerCase()){case"select":"object"==typeof n?$.each(n,function(e,t){r.find('option[value="'+t+'"]').prop("selected",!0)}):r.find('option[value="'+n+'"]').prop("selected",!0);break;case"checkbox":r.prop("checked","false"!==n?!0:!1);break;case"radio":r.prop("checked",!1),r.each(function(){var e=$(this);e.val()===n.toString()&&e.prop("checked",!0)});break;case"textarea":r.text(n);break;default:r.val(n)}a&&r.trigger("change",[])}})},e.getData=function(e,t,a){var n=e.find("input, textarea, select"),r={};return t&&(n=n.filter(":not("+t+")")),n.each(function(){var e=$(this),t=e.prop("tagName").toLowerCase(),c=e.attr("name"),o=new RegExp(/\[(.*?)\]/g),i=o.exec(c),l=5,s=null,p=null,u=null,h=null;if(t="input"!==t?t:e.attr("type").toLowerCase(),null!==i){var d=c.substring(0,c.search("\\[")),f=[];r[d]=r[d]||(a?{}:[]),u=r[d];do f.push(i[1]),i=o.exec(c),l-=1;while(null!==i||0>=l);$.each(f,function(e,n){var r=f[e+1];n=n||"0","string"==typeof r?(u[n]=u[n]||(a?{}:[]),u=u[n]):"radio"!==t&&(n=n&&"0"!==n?n:a?Object.keys(u).length:u.length,u[n]=u[n]||void 0),h=n})}switch(t){case"radio":p=n.filter('input[name="'+e.attr("name")+'"]:checked').val();break;case"checkbox":p=e.prop("checked")?e.val():!1;break;case"select":s=e.find(":selected"),s.length>1?(p=[],s.each(function(){p.push($(this).val())})):p=s.val();break;case"button":break;default:c&&(p=e.val())}null!==u?u[h]=p:r[c]=p}),r},e.getFieldType=function(e){var t=e.prop("tagName").toLowerCase();return"input"!==t?t:e.attr("type").toLowerCase()},e.addHiddenByUrl=function(t,a){var n=jse.core.fallback.getUrlParams(null),r=null,c="",o=[];$.each(n,function(e,a){a&&(r=t.find('[name="'+e+'"]'),0===r.length?c+='<input type="hidden" name="'+e+'" value="'+a+'" />':o.push(e,a))}),a&&e.prefillForm(t,o),t.prepend(c)},e.reset=function(t){t.find("select, input, textarea").each(function(){var a=$(this),n=e.getFieldType(a);switch(n){case"radio":t.find('input[name="'+a.attr("name")+'"]:checked').prop("checked",!1).first().prop("checked",!0);break;case"checkbox":a.prop("checked",!1);break;case"select":a.children().first().prop("selected",!0);break;case"textarea":a.val("");break;case"text":a.val("")}})}}(jse.libs.form);